{% extends "base.html" %}
{% block title %}정부지원사업 DB - Founderskorea{% endblock %}

{% block head_extra %}
<script src="https://unpkg.com/htmx.org@1.9.12"></script>
{% endblock %}

{% block content %}
<div class="container">
    <section class="hero" style="padding: 3rem 0 2rem;">
        <h1>정부지원사업 DB</h1>
        <p>한국 정부지원사업을 한 곳에서 검색하고, 맞춤 추천 받으세요.</p>
    </section>

    <form id="searchForm" hx-get="/gov-support/db" hx-target="#programList" hx-trigger="submit, change from:.filter-select"
          hx-push-url="true" hx-swap="innerHTML">
        <div class="search-bar">
            <input type="text" name="q" class="search-input" placeholder="사업명, 주관기관, 키워드로 검색..."
                   value="{{ q }}" hx-trigger="keyup changed delay:300ms" hx-get="/gov-support/db" hx-target="#programList">
            <button type="submit" class="btn btn-primary">검색</button>
        </div>
        <div class="filter-group">
            <select name="region" class="filter-select">
                <option value="">전체 지역</option>
                <option value="서울" {% if region == '서울' %}selected{% endif %}>서울</option>
                <option value="경기" {% if region == '경기' %}selected{% endif %}>경기</option>
                <option value="부산" {% if region == '부산' %}selected{% endif %}>부산</option>
                <option value="인천" {% if region == '인천' %}selected{% endif %}>인천</option>
                <option value="대구" {% if region == '대구' %}selected{% endif %}>대구</option>
                <option value="대전" {% if region == '대전' %}selected{% endif %}>대전</option>
                <option value="광주" {% if region == '광주' %}selected{% endif %}>광주</option>
                <option value="전국" {% if region == '전국' %}selected{% endif %}>전국</option>
            </select>
            <select name="support_type" class="filter-select">
                <option value="">전체 유형</option>
                <option value="자금" {% if support_type == '자금' %}selected{% endif %}>자금지원</option>
                <option value="멘토링" {% if support_type == '멘토링' %}selected{% endif %}>멘토링</option>
                <option value="교육" {% if support_type == '교육' %}selected{% endif %}>교육</option>
                <option value="공간" {% if support_type == '공간' %}selected{% endif %}>공간지원</option>
                <option value="컨설팅" {% if support_type == '컨설팅' %}selected{% endif %}>컨설팅</option>
            </select>
            <select name="status" class="filter-select">
                <option value="">전체 상태</option>
                <option value="모집중" {% if status == '모집중' %}selected{% endif %}>모집중</option>
                <option value="상시" {% if status == '상시' %}selected{% endif %}>상시모집</option>
                <option value="마감" {% if status == '마감' %}selected{% endif %}>마감</option>
            </select>
        </div>
    </form>

    <div id="programList">
        {% include "gov_support/_program_list.html" %}
    </div>
</div>
{% endblock %}
