{% extends "base.html" %}
{% block title %}정부지원사업 DB - Founderskorea{% endblock %}

{% block head_extra %}
<script src="https://unpkg.com/htmx.org@1.9.12"></script>
{% endblock %}

{% block content %}
<div class="container">
    <!-- Hero with stats -->
    <section style="background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%); border-radius: var(--radius); padding: 2.5rem 2rem; margin: 1.5rem 0; color: #fff; animation: fadeIn 0.5s ease-out;">
        <div style="max-width: 700px;">
            <h1 style="font-size: 1.75rem; font-weight: 900; margin-bottom: 0.5rem; color: #fff;">정부지원사업 DB</h1>
            <p style="color: rgba(255,255,255,0.85); font-size: 0.92rem; line-height: 1.6; margin-bottom: 1.5rem;">
                중소벤처기업부, 창업진흥원, 지자체 등 30개 이상의 정부지원사업을 한눈에 검색하세요.<br>
                자금지원부터 멘토링, 교육, 공간지원까지 — 나에게 맞는 사업을 찾아보세요.
            </p>
        </div>
        <div style="display: flex; gap: 2rem; flex-wrap: wrap;">
            <div style="text-align: center;">
                <div style="font-size: 1.75rem; font-weight: 900; color: var(--accent);">30+</div>
                <div style="font-size: 0.72rem; color: rgba(255,255,255,0.7);">등록 사업</div>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 1.75rem; font-weight: 900; color: var(--accent);">5조원+</div>
                <div style="font-size: 0.72rem; color: rgba(255,255,255,0.7);">총 지원규모</div>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 1.75rem; font-weight: 900; color: var(--accent);">8개</div>
                <div style="font-size: 0.72rem; color: rgba(255,255,255,0.7);">지역 커버</div>
            </div>
            <div style="text-align: center;">
                <div style="font-size: 1.75rem; font-weight: 900; color: var(--accent);">94.2%</div>
                <div style="font-size: 0.72rem; color: rgba(255,255,255,0.7);">매칭 정확도</div>
            </div>
        </div>
    </section>

    <!-- Support Type Quick Nav -->
    <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.75rem; margin-bottom: 1.5rem; animation: fadeInUp 0.4s ease-out 0.1s both;">
        <a href="/gov-support/db?support_type=자금" style="background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 1rem; text-align: center; color: var(--text); transition: all 0.2s;">
            <div style="font-size: 1.5rem; margin-bottom: 0.3rem;">💰</div>
            <div style="font-size: 0.82rem; font-weight: 700;">자금지원</div>
            <div style="font-size: 0.7rem; color: var(--text-tertiary);">최대 3억원</div>
        </a>
        <a href="/gov-support/db?support_type=멘토링" style="background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 1rem; text-align: center; color: var(--text); transition: all 0.2s;">
            <div style="font-size: 1.5rem; margin-bottom: 0.3rem;">🎓</div>
            <div style="font-size: 0.82rem; font-weight: 700;">멘토링</div>
            <div style="font-size: 0.7rem; color: var(--text-tertiary);">전문가 1:1</div>
        </a>
        <a href="/gov-support/db?support_type=교육" style="background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 1rem; text-align: center; color: var(--text); transition: all 0.2s;">
            <div style="font-size: 1.5rem; margin-bottom: 0.3rem;">📚</div>
            <div style="font-size: 0.82rem; font-weight: 700;">교육</div>
            <div style="font-size: 0.7rem; color: var(--text-tertiary);">실전 프로그램</div>
        </a>
        <a href="/gov-support/db?support_type=공간" style="background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 1rem; text-align: center; color: var(--text); transition: all 0.2s;">
            <div style="font-size: 1.5rem; margin-bottom: 0.3rem;">🏢</div>
            <div style="font-size: 0.82rem; font-weight: 700;">공간지원</div>
            <div style="font-size: 0.7rem; color: var(--text-tertiary);">사무실 제공</div>
        </a>
        <a href="/gov-support/db?support_type=컨설팅" style="background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 1rem; text-align: center; color: var(--text); transition: all 0.2s;">
            <div style="font-size: 1.5rem; margin-bottom: 0.3rem;">📋</div>
            <div style="font-size: 0.82rem; font-weight: 700;">컨설팅</div>
            <div style="font-size: 0.7rem; color: var(--text-tertiary);">전문 컨설팅</div>
        </a>
    </div>

    <!-- AI Matching CTA -->
    <div style="background: linear-gradient(135deg, rgba(13,115,119,0.08) 0%, rgba(27,54,93,0.06) 100%); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 1rem 1.5rem; margin-bottom: 1.5rem; display: flex; align-items: center; justify-content: space-between; gap: 1rem; animation: fadeInUp 0.4s ease-out 0.15s both;">
        <div>
            <strong style="font-size: 0.9rem;">나에게 맞는 사업을 모르겠다면?</strong>
            <span style="font-size: 0.82rem; color: var(--text-secondary); margin-left: 0.5rem;">AI가 5개 질문으로 맞춤 추천해드립니다</span>
        </div>
        <a href="/onboarding" class="btn btn-secondary btn-sm">AI 매칭 시작 &rarr;</a>
    </div>

    <!-- Search & Filters -->
    <form id="searchForm" hx-get="/gov-support/db" hx-target="#programList" hx-trigger="submit, change from:.filter-select"
          hx-push-url="true" hx-swap="innerHTML">
        <div class="search-bar">
            <input type="text" name="q" class="search-input" placeholder="사업명, 주관기관, 키워드로 검색..."
                   value="{{ q }}" hx-trigger="keyup changed delay:300ms" hx-get="/gov-support/db" hx-target="#programList">
            <button type="submit" class="btn btn-primary">검색</button>
        </div>
        <div class="filter-group">
            <select name="region" class="filter-select">
                <option value="">전체 지역</option>
                <option value="서울" {% if region == '서울' %}selected{% endif %}>서울</option>
                <option value="경기" {% if region == '경기' %}selected{% endif %}>경기</option>
                <option value="부산" {% if region == '부산' %}selected{% endif %}>부산</option>
                <option value="인천" {% if region == '인천' %}selected{% endif %}>인천</option>
                <option value="대구" {% if region == '대구' %}selected{% endif %}>대구</option>
                <option value="대전" {% if region == '대전' %}selected{% endif %}>대전</option>
                <option value="광주" {% if region == '광주' %}selected{% endif %}>광주</option>
                <option value="전국" {% if region == '전국' %}selected{% endif %}>전국</option>
            </select>
            <select name="support_type" class="filter-select">
                <option value="">전체 유형</option>
                <option value="자금" {% if support_type == '자금' %}selected{% endif %}>자금지원</option>
                <option value="멘토링" {% if support_type == '멘토링' %}selected{% endif %}>멘토링</option>
                <option value="교육" {% if support_type == '교육' %}selected{% endif %}>교육</option>
                <option value="공간" {% if support_type == '공간' %}selected{% endif %}>공간지원</option>
                <option value="컨설팅" {% if support_type == '컨설팅' %}selected{% endif %}>컨설팅</option>
            </select>
            <select name="status" class="filter-select">
                <option value="">전체 상태</option>
                <option value="모집중" {% if status == '모집중' %}selected{% endif %}>모집중</option>
                <option value="상시" {% if status == '상시' %}selected{% endif %}>상시모집</option>
                <option value="마감" {% if status == '마감' %}selected{% endif %}>마감</option>
            </select>
        </div>
    </form>

    <div id="programList">
        {% include "gov_support/_program_list.html" %}
    </div>
</div>
{% endblock %}
